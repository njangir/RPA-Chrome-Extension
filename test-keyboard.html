<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyboard Recording Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 5px rgba(0,123,255,0.3);
        }
        
        .test-section {
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            background: #f9f9f9;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        
        .test-instructions {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .test-instructions h3 {
            margin-top: 0;
            color: #0066cc;
        }
        
        .test-instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .test-instructions li {
            margin: 5px 0;
        }
        
        .keyboard-test {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .keyboard-test h4 {
            margin-top: 0;
            color: #856404;
        }
        
        .keyboard-test p {
            margin: 5px 0;
            color: #856404;
        }
        
        .keyboard-test strong {
            color: #6c5ce7;
        }
        
        .keyboard-test .test-area {
            background: white;
            border: 2px dashed #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            min-height: 50px;
        }
        
        .keyboard-test .test-area:focus {
            border-color: #007bff;
            outline: none;
        }
        
        .keyboard-test .test-area:focus::after {
            content: " (Click here and press keys to test)";
            color: #666;
            font-style: italic;
        }
        
        .keyboard-test .key-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .keyboard-test .key-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 8px 12px;
            border-radius: 4px;
            text-align: center;
            font-family: monospace;
            font-size: 12px;
            color: #495057;
        }
        
        .keyboard-test .key-item.important {
            background: #e3f2fd;
            border-color: #2196f3;
            color: #1976d2;
            font-weight: bold;
        }
        
        .keyboard-test .key-item.function {
            background: #f3e5f5;
            border-color: #9c27b0;
            color: #7b1fa2;
        }
        
        .keyboard-test .key-item.navigation {
            background: #e8f5e8;
            border-color: #4caf50;
            color: #388e3c;
        }
        
        .keyboard-test .key-item.edit {
            background: #fff3e0;
            border-color: #ff9800;
            color: #f57c00;
        }
        
        .test-results {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }
        
        .test-results h3 {
            margin-top: 0;
            color: #333;
        }
        
        .test-results .result-item {
            background: white;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 5px 0;
            border-radius: 3px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .test-results .result-item.success {
            border-color: #28a745;
            background: #d4edda;
        }
        
        .test-results .result-item.error {
            border-color: #dc3545;
            background: #f8d7da;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .clear-btn {
            background: #6c757d;
        }
        
        .clear-btn:hover {
            background: #545b62;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîë Keyboard Recording Test Page</h1>
        
        <div class="test-instructions">
            <h3>üß™ Testing Instructions</h3>
            <p>This page tests keyboard recording functionality with the Chrome extension:</p>
            <ol>
                <li>Load the Chrome extension in your browser</li>
                <li>Click "Start Recording" in the extension</li>
                <li>Try pressing different keys in the test areas below</li>
                <li>Check that key press steps are recorded in the extension</li>
                <li>Test playback to see the key press simulation</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>üìù Text Input Testing</h3>
            <div class="form-group">
                <label for="textInput">Text Input Field:</label>
                <input type="text" id="textInput" placeholder="Type here and press Tab, Enter, etc.">
            </div>
            
            <div class="form-group">
                <label for="textareaInput">Textarea Field:</label>
                <textarea id="textareaInput" rows="3" placeholder="Type here and test navigation keys"></textarea>
            </div>
            
            <div class="form-group">
                <label for="emailInput">Email Input Field:</label>
                <input type="email" id="emailInput" placeholder="test@example.com">
            </div>
        </div>
        
        <div class="test-section">
            <h3>üéØ Focus Testing</h3>
            <div class="keyboard-test">
                <h4>Focusable Elements Test</h4>
                <p>Click on different elements and press keys to test focus handling:</p>
                
                <div class="test-area" tabindex="0">
                    <strong>Div with tabindex (click here first)</strong>
                    <p>This div can receive focus. Press Tab, Enter, Escape, etc.</p>
                </div>
                
                <div class="test-area" contenteditable="true">
                    <strong>Content Editable Div</strong>
                    <p>This div is editable. Press keys to test content editing.</p>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>‚å®Ô∏è Key Press Testing</h3>
            <div class="keyboard-test">
                <h4>Important Keys to Test</h4>
                <p>Press these keys while focused on any input element:</p>
                
                <div class="key-list">
                    <div class="key-item important">Tab</div>
                    <div class="key-item important">Enter</div>
                    <div class="key-item important">Escape</div>
                    <div class="key-item navigation">‚Üë Arrow Up</div>
                    <div class="key-item navigation">‚Üì Arrow Down</div>
                    <div class="key-item navigation">‚Üê Arrow Left</div>
                    <div class="key-item navigation">‚Üí Arrow Right</div>
                    <div class="key-item navigation">Home</div>
                    <div class="key-item navigation">End</div>
                    <div class="key-item navigation">Page Up</div>
                    <div class="key-item navigation">Page Down</div>
                    <div class="key-item edit">Backspace</div>
                    <div class="key-item edit">Delete</div>
                    <div class="key-item edit">Insert</div>
                    <div class="key-item function">F1</div>
                    <div class="key-item function">F2</div>
                    <div class="key-item function">F3</div>
                    <div class="key-item function">F4</div>
                    <div class="key-item function">F5</div>
                    <div class="key-item function">F6</div>
                    <div class="key-item function">F7</div>
                    <div class="key-item function">F8</div>
                    <div class="key-item function">F9</div>
                    <div class="key-item function">F10</div>
                    <div class="key-item function">F11</div>
                    <div class="key-item function">F12</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üîß Form Navigation Testing</h3>
            <div class="keyboard-test">
                <h4>Form with Multiple Fields</h4>
                <p>Test Tab navigation between form fields:</p>
                
                <form>
                    <div class="form-group">
                        <label for="firstName">First Name:</label>
                        <input type="text" id="firstName" placeholder="John">
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Last Name:</label>
                        <input type="text" id="lastName" placeholder="Doe">
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" placeholder="john@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone:</label>
                        <input type="tel" id="phone" placeholder="555-1234">
                    </div>
                    
                    <div class="form-group">
                        <label for="country">Country:</label>
                        <select id="country">
                            <option value="">Select Country</option>
                            <option value="us">United States</option>
                            <option value="ca">Canada</option>
                            <option value="uk">United Kingdom</option>
                            <option value="au">Australia</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="comments">Comments:</label>
                        <textarea id="comments" rows="3" placeholder="Enter your comments here"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <button type="button" onclick="testFormSubmission()">Test Submit</button>
                        <button type="button" onclick="testFormReset()">Reset Form</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üéÆ Interactive Testing</h3>
            <div class="keyboard-test">
                <h4>Keyboard Event Testing</h4>
                <p>This area will show keyboard events as they happen:</p>
                
                <div class="test-area" id="keyboardTestArea" tabindex="0">
                    <strong>Click here and press keys</strong>
                    <p>Watch the console and extension for recorded events</p>
                </div>
                
                <div style="text-align: center; margin-top: 15px;">
                    <button onclick="clearTestResults()">üóëÔ∏è Clear Results</button>
                    <button onclick="testKeyboardEvents()">üß™ Test Keyboard Events</button>
                </div>
            </div>
        </div>
        
        <div class="test-results" id="testResults">
            <h3>Test Results:</h3>
            <div id="resultsContent"></div>
        </div>
    </div>

    <script>
        let keyboardEvents = [];
        
        // Track keyboard events
        function trackKeyboardEvent(event) {
            const eventData = {
                type: event.type,
                key: event.key,
                code: event.code,
                keyCode: event.keyCode,
                which: event.which,
                ctrlKey: event.ctrlKey,
                shiftKey: event.shiftKey,
                altKey: event.altKey,
                metaKey: event.metaKey,
                target: event.target.tagName + (event.target.id ? '#' + event.target.id : ''),
                timestamp: new Date().toISOString()
            };
            
            keyboardEvents.push(eventData);
            console.log('Keyboard event:', eventData);
            
            // Update results display
            updateResultsDisplay();
        }
        
        // Add keyboard event listeners to all focusable elements
        document.addEventListener('keydown', trackKeyboardEvent);
        document.addEventListener('keyup', trackKeyboardEvent);
        
        // Update results display
        function updateResultsDisplay() {
            const resultsDiv = document.getElementById('testResults');
            const resultsContent = document.getElementById('resultsContent');
            
            if (keyboardEvents.length > 0) {
                resultsDiv.style.display = 'block';
                
                let results = '<h4>Recent Keyboard Events:</h4>';
                results += '<div class="keyboard-test">';
                
                // Show last 10 events
                const recentEvents = keyboardEvents.slice(-10).reverse();
                recentEvents.forEach((event, index) => {
                    const eventClass = event.type === 'keydown' ? 'success' : '';
                    results += `
                        <div class="result-item ${eventClass}">
                            <strong>${event.type.toUpperCase()}</strong> - 
                            Key: <strong>${event.key}</strong> | 
                            Code: <strong>${event.code}</strong> | 
                            Target: <strong>${event.target}</strong> | 
                            Time: ${event.timestamp}
                        </div>
                    `;
                });
                
                results += '</div>';
                resultsContent.innerHTML = results;
            }
        }
        
        // Clear test results
        function clearTestResults() {
            keyboardEvents = [];
            document.getElementById('testResults').style.display = 'none';
            console.log('Test results cleared');
        }
        
        // Test keyboard events programmatically
        function testKeyboardEvents() {
            const testArea = document.getElementById('keyboardTestArea');
            testArea.focus();
            
            // Test important keys
            const testKeys = ['Tab', 'Enter', 'Escape', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Home', 'End'];
            
            testKeys.forEach((key, index) => {
                setTimeout(() => {
                    const event = new KeyboardEvent('keydown', {
                        key: key,
                        code: key === 'Tab' ? 'Tab' : key,
                        keyCode: getKeyCode(key),
                        which: getKeyCode(key),
                        bubbles: true,
                        cancelable: true
                    });
                    testArea.dispatchEvent(event);
                }, index * 200);
            });
        }
        
        // Get key code for testing
        function getKeyCode(key) {
            const keyCodes = {
                'Tab': 9,
                'Enter': 13,
                'Escape': 27,
                'ArrowUp': 38,
                'ArrowDown': 40,
                'ArrowLeft': 37,
                'ArrowRight': 39,
                'Home': 36,
                'End': 35,
                'PageUp': 33,
                'PageDown': 34,
                'Backspace': 8,
                'Delete': 46,
                'Insert': 45
            };
            return keyCodes[key] || 0;
        }
        
        // Form testing functions
        function testFormSubmission() {
            console.log('Form submission test');
            const form = document.querySelector('form');
            const submitEvent = new Event('submit', { bubbles: true, cancelable: true });
            form.dispatchEvent(submitEvent);
        }
        
        function testFormReset() {
            console.log('Form reset test');
            const form = document.querySelector('form');
            form.reset();
        }
        
        // Focus management
        document.addEventListener('focusin', function(event) {
            console.log('Element focused:', event.target.tagName + (event.target.id ? '#' + event.target.id : ''));
        });
        
        document.addEventListener('focusout', function(event) {
            console.log('Element blurred:', event.target.tagName + (event.target.id ? '#' + event.target.id : ''));
        });
        
        // Log page load
        console.log('Keyboard test page loaded. Start recording in the extension and test keyboard events.');
    </script>
</body>
</html>
